-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONNECTION
-----------------------------------------------------------------------------------------------------------------------------------------
vSERVER = Tunnel.getInterface("crafting")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CLOSE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("invClose",function(Data,Callback)
	SetNuiFocus(false,false)
	SendNUIMessage({ action = "hideNUI" })

	Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- REQUESTCRAFTING
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("requestCrafting",function(Data,Callback)
	local inventoryCraft,inventoryUser,invPeso,invMaxpeso = vSERVER.requestCrafting(Data["craft"])
	if inventoryCraft then
		Callback({ inventoryCraft = inventoryCraft, inventario = inventoryUser, invPeso = invPeso, invMaxpeso = invMaxpeso })
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- FUNCTIONCRAFT
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("functionCraft",function(Data,Callback)
	vSERVER.functionCrafting(Data["index"],Data["craft"],Data["amount"],Data["slot"])

	Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- FUNCTIONDESTROY
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("functionDestroy",function(Data,Callback)
	vSERVER.functionDestroy(Data["index"],Data["craft"],Data["amount"],Data["slot"])

	Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- POPULATESLOT
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("populateSlot",function(Data,Callback)
	TriggerServerEvent("crafting:populateSlot",Data["item"],Data["slot"],Data["target"],Data["amount"])

	Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- UPDATESLOT
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("updateSlot",function(Data,Callback)
	TriggerServerEvent("crafting:updateSlot",Data["item"],Data["slot"],Data["target"],Data["amount"])

	Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- CRAFTING:UPDATE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNetEvent("crafting:Update")
AddEventHandler("crafting:Update",function(Action)
	SendNUIMessage({ action = Action })
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- LIST
-----------------------------------------------------------------------------------------------------------------------------------------
local List = {

	--RESTAURANTES 
	["1"] = { -77.8,20.75,72.94,"Mcdonalds2" },    --------- SUL
	["2"] = { -78.93,18.86,72.94,"Mcdonalds" },     --------- SUL
	["3"] = { -74.49,19.02,72.93,"Mcdonalds3" },  --------- SUL
	["4"] = { -73.43,20.88,72.93,"Uwucoffee1" },   --------- SUL
	["5"] = { -74.72,21.92,72.93,"Uwucoffee2" },  --------- SUL
-----------------------------------------------------------------------------------------
    -- MECANICAS
	--["6"] = { -586.6,-932.57,23.88, "Redline"},   --------- PLACA, NITRO, DESMANCHE, TUNING CAR 
	-- ["7"] = { 802.54,-2111.07,29.18,"Bennys2" },  --------- SUL
	-- ["8"] = { 797.03,-2108.96,29.17,"Bennys2" },  --------- SUL
	["9"] = { 878.64,-2130.83,30.46,"Mechanic" }, --------- SPORT RACE
	-- ["10"] = { 1175.86,2635.65,37.81,"Mechanic68" }, --------- NORTE
------------------------------------------------------------------------------------------
    -- ILEGAIS OPEN
	["11"] = { 2707.27,2776.73,37.88,"Polvora" },
	["12"] = { -1051.95,-232.99,44.41,"Pendrive" },
	["13"] = { 1272.26,-1711.55,54.76,"C4" },
	--["14"] = { -345.17,-139.94,39.05,"Lockpick" },
	--["15"] = { 2333.15,3054.51,48.16,"Dismantle" },
------------------------------------------------------------------------------------------
   -- LEGAIS 
   ["16"] = { -341.15,-1567.58,25.22,"Lixeiro" },
--    ["17"] = { -611.92,-1613.64,27.01,"Lixeiro2" },
   ["18"] = { -1246.64,-810.63,17.83,"Ifrutcrafting" },   
   ["19"] = { -570.69,242.02,74.88,"Ifrutcrafting-2" },   
--    ["20"] = { -562.52,227.6,74.88,"Digital-3" },   
--    ["21"] = { 247.17,222.66,106.29,"Banco" },
	["22"] = { 161.53,-1312.52,29.35,"Pawnshop-2" },
   ["23"] = { 171.63,-1314.23,29.34,"Pawnshop" },  
------------------------------------------------------------------------------------------
	-- ILEGAIS SUL   
	-- ["24"] = { 95.27,-1985.09,20.44,"Ballas" },  ------ META
	-- ["25"] = { -140.29,-1681.68,33.21,"Families" }, -- LEAN
	-- ["26"] = { -1055.97,-1655.96,1.5,"Vagos" },  ----- COCAINE
	-- ["27"] = { 425.07,-1509.67,33.9,"Bloods" },  ----- ECSTASY
	--["28"] = { 94.2,-1293.63,29.27,"Vanilla" }, ------ LAVAGEM
-------------------------------------------------------------------------------------------
	-- ILEGAIS NORTE
	["29"] = { -1824.9,4530.33,5.32,"Bratva" },------------ ARMAS 2
	--["30"] = { 1405.97,1137.72,109.74,"Tijuana" }, -------- ARMAS1
	-- ["31"] = { 2305.52,944.37,111.4,"Sinaloa" }, -------- CONFIGURAR INTERIOR
	-- ["32"] = { 249.91,6762.11,19.37,"Lafamilia" }, ------ CONFIGURAR INTERIOR
	--["33"] = { 2517.08,4104.39,35.59,"Thelost" },  --------- MUNICAO 1
	--["34"] = { -1870.5,2061.62,135.44,"Cosanostra" }, ------ MUNICAO 2
	-- ["35"] = { 891.05,-965.07,35.55,"Lavagem" },
	--["36"] = { 2331.93,2571.49,46.67,"Coiote" },

	["37"] = { -1026.06,-1472.36,5.31,"Yakuza-1" },
	["38"] = { -1023.28,-1472.29,5.31,"Yakuza-2" },
	["39"] = { -1021.01,-1486.04,-3.34,"Yakuza-3" },
	["40"] = { 403.07,1724.43,188.48,"Favela06" }, --------- DESMANCHE


	["41"] = { 1272.23,-127.1,87.64,"Favela01" }, --------- Barragem FAVELA01 
	["42"] = { 2123.37,413.75,224.64,"Favela02" }, --------- Barragem P2 FAVELA02
	["43"] = { 873.99,1035.87,283.67,"Favela03" }, --------- Placa Vinewood FAVELA03
	["44"] = { 800.13,-294.98,69.45,"Favela04" }, --------- CAMPINHO FAVELA04
	["45"] = { -1870.47,2061.64,135.44,"Favela05" }, --------- VINHEDO MACONHA ----------------------------------
	["46"] = { -309.01,1521.38,367.73,"Municao1" }, --------- FAVELA OBSERVATORIO MUNICAO1
	["47"] = { 2522.11,4106.04,35.59,"Thelost" }, --------- 
	["48"] = { 1377.72,-1299.0,75.62,"Armas1" }, --------- FAVELA do lado do helipa Armas1
	["49"] = { 1333.06,-681.07,75.86,"Armas2" }, --------- HELIPA  ---------------------------------
	

	

	

	-- ["50"] = { 1272.23,-127.1,87.64,"Favela06" }, --------- 
	-- ["51"] = { 2123.37,413.75,224.64,"Favela07" }, --------- 
	-- ["52"] = { 873.99,1035.87,283.67,"Favela08" }, ---------
	-- ["53"] = { 800.13,-294.98,69.45,"Favela09" }, --------- 
	-- ["54"] = { 1331.04,-685.38,75.86,"Favela10" }, ---------


	---------------------------------------------------------------------------------------------------
	--["41"] = { -1310.3,-835.66,17.04,"Drogas-bancadas" },
	
	
}
-----------------------------------------------------------------------------------------------------------------------------------------
-- THREADSTART
-----------------------------------------------------------------------------------------------------------------------------------------
CreateThread(function()
	for Number,v in pairs(List) do
		exports["target"]:AddCircleZone("Crafting:"..Number,vec3(v[1],v[2],v[3]),1.5,{
			name = "Crafting:"..Number,
			heading = 3374176
		},{
			shop = Number,
			Distance = 1.0,
			options = {
				{
					event = "crafting:openSystem",
					label = "Abrir",
					tunnel = "shop"
				}
			}
		})
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- CRAFTING:OPENSYSTEM
-----------------------------------------------------------------------------------------------------------------------------------------
AddEventHandler("crafting:openSystem",function(Number)
	if List[Number] then
		if vSERVER.requestPerm(Number,List[Number][4]) then
			SetNuiFocus(true,true)
			SendNUIMessage({ action = "showNUI", name = List[Number][4] })
		end
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- CRAFTING:OPENSOURCE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNetEvent("crafting:openSource")
AddEventHandler("crafting:openSource",function()
	SetNuiFocus(true,true)
	SendNUIMessage({ action = "showNUI", name = "Inventory" })
end)
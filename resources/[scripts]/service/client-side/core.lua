-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONNECTION
-----------------------------------------------------------------------------------------------------------------------------------------
vSERVER = Tunnel.getInterface("service")
-----------------------------------------------------------------------------------------------------------------------------------------
-- LIST
-----------------------------------------------------------------------------------------------------------------------------------------
local List = {
	{ 837.11,-1289.03,28.23,"Core",1.0 }, -- ROTA
	{ 442.81,-982.00,30.69,"PoliciaMilitar",1.0 }, -- PMESP
	{ -918.52,-2027.99,9.40,"PCivil",1.0 }, -- CIVIL
	{ 705.54,256.9,97.91,"PoliciaMilitar",1.0 }, -- GCM
	{ 442.81,-982.00,30.69,"PoliciaMilitar",1.0 }, -- BAEP
	{ -283.49,6040.55,33.08,"PRF",1.0 }, -- PRF
	{ 355.46,-1399.63,32.5,"Paramedic-1",1.0 },
	{ 1825.6,3667.98,34.27,"Paramedic-2",1.0 },
	{ -255.65,6330.45,32.42,"Paramedic-3",1.0 },

	{ 876.56,-2100.36,30.48,"Mechanic-1",2.0 },
	{ -1251.94,-804.03,17.83,"Ifrut-1",2.0 },
	{ 167.44,-1313.39,29.35,"Pawnshop-1",2.0 },
	-- {-589.01,-932.05,23.88,"Redline",2.0 },
	-- { 1186.5,2637.86,39.26,"Mechanic68-1",2.0 },
	-- { -344.5,-126.29,38.93,"LSCustoms-1",2.0 },
	-- { 1243.72,-358.2,69.24,"Hornys-1",2.0 },
	{ -587.81,-1053.44,22.34,"Uwucoffee-1",2.0 },
	{ -1197.87,-893.19,13.88,"Mcdonalds-1",2.0 },
}
-----------------------------------------------------------------------------------------------------------------------------------------
-- THREADSTART
-----------------------------------------------------------------------------------------------------------------------------------------
CreateThread(function()
	for k,v in pairs(List) do
		exports["target"]:AddCircleZone("Service:"..v[4],vec3(v[1],v[2],v[3]),1.40,{
			name = "Service:"..v[4],
			heading = 3374176
		},{
			shop = k,
			Distance = v[5],
			options = {
				{
					label = "Ponto eletr√¥nico",
					event = "service:Toggle",
					tunnel = "shop"
				}
			}
		})
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- SERVICE:TOGGLE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNetEvent("service:Toggle")
AddEventHandler("service:Toggle",function(Service)
	if LocalPlayer["state"]["Route"] < 900000 then
		TriggerServerEvent("service:Toggle",List[Service][4])
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- SERVICE:LABEL
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNetEvent("service:Label")
AddEventHandler("service:Label",function(Service,Text)
	if Service == "PoliciaMilitar" then
		exports["target"]:LabelText("Service:PoliciaMilitar",Text)
	elseif Service == "Core" then
		exports["target"]:LabelText("Service:Core",Text)
	elseif Service == "PRF" then
		exports["target"]:LabelText("Service:PRF",Text)
	elseif Service == "PCivil" then
		exports["target"]:LabelText("Service:PCivil",Text)
	elseif Service == "Paramedic" then
		exports["target"]:LabelText("Service:Paramedic-1",Text)
		exports["target"]:LabelText("Service:Paramedic-2",Text)
		exports["target"]:LabelText("Service:Paramedic-3",Text)
	else
		exports["target"]:LabelText("Service:"..Service,Text)
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- SERVICE:OPEN
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNetEvent("service:Open")
AddEventHandler("service:Open",function(Title)
	SetNuiFocus(true,true)
	SetCursorLocation(0.5,0.5)
	SendNUIMessage({ action = "openSystem", title = Title })
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- CLOSESYSTEM
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("closeSystem",function(Data,Callback)
	SetNuiFocus(false,false)
	SetCursorLocation(0.5,0.5)
	SendNUIMessage({ action = "closeSystem" })

	Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- REQUEST
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("Request",function(Data,Callback)
	Callback({ Result = vSERVER.Request() })
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- REMOVE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("Remove",function(Data,Callback)
	TriggerServerEvent("service:Remove",Data["passport"])

	Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- ADD
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("Add",function(Data,Callback)
    TriggerServerEvent("service:Add",Data["passport"])

    Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- ADD
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("Hierarchy",function(Data,Callback)
    TriggerServerEvent("service:Hierarchy",Data["passport"],Data["mode"])

    Callback("Ok")
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- SERVICE:UPDATE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNetEvent("service:Update")
AddEventHandler("service:Update",function()
	SendNUIMessage({ action = "Update" })
end)